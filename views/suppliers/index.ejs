<%- include('../partials/header') %>

<div class="container my-5">
  <h1 class="mb-4">Suppliers</h1>

  <% if(currentUser){ %>
    <a href="/suppliers/new" class="btn btn-success mb-3">New Supplier</a>
  <% } %>

  <!-- Supplier List Table -->
  <ul class="list-group">
    <!-- Header row -->
    <li class="list-group-item d-flex fw-bold">
      <span class="flex-grow-1" style="max-width: 150px;">Name</span>
      <span class="flex-grow-1" style="max-width: 200px;">Address</span>
      <span style="width: 120px;">Phone</span>
      <% if(currentUser){ %>
        <span>Actions</span>
      <% } %>
    </li>

    <% suppliers.forEach(s => { %>
      <li class="list-group-item d-flex align-items-center">
        <span class="flex-grow-1" style="max-width: 150px;"><%= s.name %></span>
        <span class="flex-grow-1" style="max-width: 200px;"><%= s.address %></span>
        <span style="width: 120px;"><%= s.phone %></span>
        <% if(currentUser){ %>
          <span class="d-flex gap-2">
            <a href="/suppliers/<%= s._id %>/edit" class="btn btn-sm btn-warning">Edit</a>
            <form action="/suppliers/<%= s._id %>?_method=DELETE" method="POST" class="d-inline">
              <button type="submit" class="btn btn-sm btn-danger">Delete</button>
            </form>
          </span>
        <% } %>
      </li>
    <% }) %>
  </ul>
</div>

<%- include('../partials/footer') %>
